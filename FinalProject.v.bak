module FinalProject (
    //clock
    input clk,
    //switches 
    input [9:0] SW,
    // key0=reset, key1=button 
    input [1:0] KEY,
    //7-segment  displays
    output [6:0] HEX0, HEX1, HEX2, HEX3, HEX4, HEX5,
    //VGA color outputs
    output [3:0] VGA_R, VGA_G, VGA_B,
    //VGA syncs
    output VGA_HS, VGA_VS
);

    //pixel  clock 
    wire pixel_clk;
    pll pll_inst (.inclk0(clk), .c0(pixel_clk));

    //VGA timing/ controller signals
    wire [31:0] column;
    wire [31:0] row;
    wire disp_ena;
    wire h_sync, v_sync;

    //640x480 / timings
    vga_controller #(
        .h_pixels(640), .h_fp(16), .h_pulse(96), .h_bp(48), .h_pol(1'b0),
        .v_pixels(480), .v_fp(10), .v_pulse(2),  .v_bp(33), .v_pol(1'b0)
    ) timing (
        .pixel_clk(pixel_clk),
        .reset_n  (KEY[0]),
        .h_sync   (h_sync),
        .v_sync   (v_sync),
        .disp_ena (disp_ena),
        .column   (column),
        .row      (row)
    );

    //core drawing/control 
    wire [3:0] r,g,b;
    wire [6:0] hex1,hex2;

    //draw/move rectangle 
    vga_lab5 core (
        .clk (pixel_clk),
        .reset_n (KEY[0]),
        .key_n (KEY[1]),
        .sw (SW),
        .disp_ena (disp_ena),
        .column(column[9:0]),
        .row (row[8:0]),
        .r (r),
        .g (g),
        .b (b),
        .hex1 (hex1),
        .hex2 (hex2)
    );


    //VGA outputs
    assign VGA_R= r;
    assign VGA_G= g;
    assign VGA_B= b;
    assign VGA_HS= h_sync;
    assign VGA_VS= v_sync;


    // 7-seg, only hex1/hex2 is used
    assign HEX0= 7'b1111111;
    assign HEX3= 7'b1111111;
    assign HEX4= 7'b1111111;
    assign HEX5= 7'b1111111;
    assign HEX1= hex1;
    assign HEX2= hex2;
	
endmodule
